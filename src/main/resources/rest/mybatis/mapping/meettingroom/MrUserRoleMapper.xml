<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="rest.mybatis.dao.meettingroom.MrUserRoleMapper">
  <resultMap id="BaseResultMap" type="rest.mybatis.model.meettingroom.MrUserRole">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Dec 06 16:40:32 CST 2016.
    -->
    <id column="ID" jdbcType="INTEGER" property="id" />
    <result column="USERID" jdbcType="INTEGER" property="userId" />
    <result column="USERROLE" jdbcType="VARCHAR" property="userRole" />
    <result column="USER_NAME" jdbcType="VARCHAR" property="userName" />
  </resultMap>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Dec 06 16:40:32 CST 2016.
    -->
    ID, USERID, USERROLE,USER_NAME
  </sql>
  <!-- 按用户id查询角色-->
  <select id="selectByUserId"  resultMap="BaseResultMap" parameterType="java.lang.Integer">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Dec 06 16:40:32 CST 2016.
    -->
    select 
    <include refid="Base_Column_List" />
    from USER_ROLE
    where USERID = #{userId,jdbcType=INTEGER}
  </select>
  <!-- 删除用户角色 -->
  <delete id="deleteUserRole" parameterType="java.lang.Integer">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Dec 06 16:40:32 CST 2016.
    -->
    delete from USER_ROLE
    where USERID = #{userId,jdbcType=INTEGER}
  </delete>
  <!-- 新增用户角色 -->
  <insert id="insertUserRole" parameterType="rest.mybatis.model.meettingroom.MrUserRole">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Dec 06 16:40:32 CST 2016.
    -->
    insert into USER_ROLE (ID, USERID, USERROLE,USER_NAME)
    values (#{id,jdbcType=INTEGER}, #{userId,jdbcType=INTEGER}, #{userRole,jdbcType=VARCHAR},#{userName,jdbcType=VARCHAR})
  </insert>
  <!-- 查询所有 -->
  <select id="selectUserRole" resultMap="BaseResultMap">
  	 select 
    <include refid="Base_Column_List" />
    from USER_ROLE
  </select>
  <!-- 查询分页 -->
   <select id="seachUserRoleByPage" parameterType="java.lang.Integer" resultMap="BaseResultMap" >
    <bind name="offset" value="(page-1)*10"/>
  	 select 
    <include refid="Base_Column_List" />
    from USER_ROLE limit ${offset},10
  </select>
  <!-- 查询总数 -->
   <select id="selectUserRoleCounts" resultType="java.lang.Integer">
  	 select count(*) from USER_ROLE 
  </select>
  <!-- 根据名字模糊查 -->
  <select id="selectUserRoleByName" parameterType="java.lang.String" resultMap="BaseResultMap" >
  	 select 
    <include refid="Base_Column_List" />
    from USER_ROLE where USER_NAME like #{userName}
  </select>
</mapper>